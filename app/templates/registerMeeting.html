{% extends 'base.html' %}
{% block title %}
    提交会议信息（Submit New Meeting）
{% endblock %}
{% block content %}
<style>
#submit{

}
</style>

    <div class="card meetings-card">
        <div class="card-body ">

            <div class="row">
                <div class="col-1"></div>
                <div class="col-10">
                    {% import "bootstrap/wtf.html" as wtf %}
                    <form action="" method="post" class="form" role="form"
                          onsubmit="return validateForm()" id="registerForm">
                        {{ form.hidden_tag() }}
                        <div class="meeting-input-group">
                            <div class="meeting-input-group-title"><p>会议名称（中英文至少填一项）</p><p>Meeting Name (Fill in at least one item in Chinese or English)</p></div>
                            {{ wtf.form_field(form.title) }}
                            {{ wtf.form_field(form.title_EN) }}
                        </div>
                        <div class="meeting-input-group">
                            <div class="meeting-input-group-title"><p>会议地点（中英文至少填一项）</p><p>Meeting Location (Fill in at least one item in Chinese or English)</p></div>
                            {{ wtf.form_field(form.location) }}
                            {{ wtf.form_field(form.location_EN) }}
                        </div>
                        <div class="meeting-input-group">
                            <div class="meeting-input-group-title"><p>会议时间</p><p>Meeting Date</p></div>
                            {{ wtf.form_field(form.start_date) }}
                            {{ wtf.form_field(form.end_date) }}
                        </div>
                        <div class="meeting-input-group">
                            <div class="meeting-input-group-title"><p>会议语言</p><p>Meeting Language</p></div>
                            {{ wtf.form_field(form.lang) }}
                        </div>
                            <div class="meeting-input-group">
                                <div class="meeting-input-group-title"><p>其他会议信息（选填）</p><p>Other Meeting Information (Optional)</p></div>
                                {{ wtf.form_field(form.url) }}
                                {{ wtf.form_field(form.short_name) }}
                                {{ wtf.form_field(form.theme) }}
                                {{ wtf.form_field(form.theme_EN) }}
                                {{ wtf.form_field(form.key_words) }}
                                {{ wtf.form_field(form.key_words_EN) }}
                            </div>

                            <div class="meeting-input-group">
                                <div class="meeting-input-group-title"><p>联系人信息</p><p>Contact Information</p></div>
                                {{ wtf.form_field(form.contact) }}
                                {{ wtf.form_field(form.email) }}
                                {{ wtf.form_field(form.phone) }}
                            </div>
                            <div style="text-align: center;">
                                {{ wtf.form_field(form.submit,class="btn btn-primary max-auto") }}
                            </div>
                    </form>
                </div>
                <div class="col-1"></div>
            </div>

        </div>
        <script>

            function validateForm() {
                var form = document.forms["registerForm"];

                //中文和英文标题至少填一项
                if (form["title"].value == "" && form["title_EN"].value == "") {
                    alert("中文和英文标题至少填写一项");
                    $("#title").attr("placeHolder", "与下一条English Title二选一，至少一条");
                    $("#title_EN").attr("placeHolder", "Fill in at least one item with the previous one 会议名称");
                    return false;
                }
                //中英文地址至少填一项
                var location = form["location"].value;
                var location_EN = form["location_EN"].value;
                if (location == "" && location_EN == "") {
                    alert("中英文地址至少填写一项");
                    $("#location").attr("placeHolder", "与下一条location二选一，至少一条");
                    $("#location_EN").attr("placeHolder", "Fill in at least one item with the previous one 会议地点")
                    return false
                }
                //地址格式正则检测
                var patt = /.+-.+/;
                if (location != "" && !patt.test(location)) {
                    alert("请按指定格式输入地址");
                    return false
                }
                if (location_EN != "" && !patt.test(location_EN)) {
                    alert("请按指定格式输入英文地址");
                    return false;
                }
                //验证日期
                var today = new Date();
                var start_date = new Date(form["start_date"].value);
                var end_date = new Date(form["end_date"].value);
                if (start_date < today) {
                    alert("开始时间已过，请检查日期是否正确");
                    return false;
                }
                if (start_date > end_date) {
                    alert("开始时间在结束时间之后，请检查日期是否正确");
                    return false;
                }


            }

            $(function () {
                $(".control-label").removeClass("col-lg-2");


            });
        </script>
{% endblock %}