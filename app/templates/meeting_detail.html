{% extends 'base.html' %}
{% block title %}
{{meeting.title}}
{% if meeting.short_name %}
( {{meeting.short_name}} )
{% endif %}
{% endblock %}
{% block content %}
<div class="card meetings-card" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
    <div class="card-body meeting-intro">
        <blockquote class="blockquote mb-0">
            <div class="row meetings-detail">
                <div class="col-sm-2">日期</div>
                <div class="col-sm-10">{{meeting.start_date}} - {{meeting.end_date}}</div>
                <div class="col-sm-2">地点</div>
                <div class="col-sm-10">{{meeting.location}}</div>
                <div class="col-sm-2">联系人</div>
                <div class="col-sm-10">{{meeting.contact}}</div>
                <div class="col-sm-2">联系电话</div>
                <div class="col-sm-10">{{meeting.phone}}</div>
                <div class="col-sm-2">会议网址</div>
                <div class="col-sm-10">{{meeting.url}}</div>
                <div class="col-sm-2">邮件</div>
                <div class="col-sm-10">{{meeting.email}}</div>
                <div class="col-sm-2">关键词</div>
                <div class="col-sm-10">{{meeting.key_words}}</div>
                <div class="col-sm-2">会议主题</div>
                <div class="col-sm-10">{{meeting.introduction}} </div>
                <div class="col-sm-2">会议语言</div>
                <div class="col-sm-10">{{meeting.lang}} </div>
                <div class="col-sm-2">编号</div>
                <div class="col-sm-10">{{meeting.id}}</div>
            </div>
        </blockquote>

        <!-- 对已登录用户显示修改界面 -->
        {% if current_user.is_authenticated and meeting.status.__str__()=='MeetingStatusType.APPROVED' %}
            <a href={{ url_for('update_meeting_form',id=meeting.id)}}><button class="btn-danger"> 修改信息 </button></a>
        {% endif %}

        <!--管理员界面 -->
        {% if current_user.role.__str__()=='RoleType.ADMIN' %}
        <p> 状态：
            {% if meeting.status.__str__()=='MeetingStatusType.REGISTERED' %}
            <!-- 除了显示状态之外，还有通过/不通过选项 -->
            已注册，待审核。
                <a href="{{ url_for('approve',id=meeting.id) }}"><button class="btn-info"> 通过审核 </button></a>

            <a href="{{ url_for('unapprove',id=meeting.id) }}"> <button class="btn-danger">不通过</button> </a>
            {% elif meeting.status.__str__()=='MeetingStatusType.APPROVED' %}
            审核通过。
            {% elif meeting.status.__str__() == 'MeetingStatusType.UNAPPROVED' %}
            审核未通过。
            {% elif meeting.status.__str__() == 'MeetingStatusType.OUTDUE' %}
            已过期。
            {% else %}
            ...
            {% endif %}
        </p>

        {% endif %}


    </div>
</div>
<div class="card meetings-card">
    <div class="card-body meetings-mainPage-title">
        <script>
               document.write('<a href="' + document.referrer + '">返回列表</a>');




        </script>
    </div>
</div>


{% endblock %}
